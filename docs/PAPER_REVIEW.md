# 論文內容檢查與建議

## 📋 檢查結果

### ✅ 已符合論文要求的部分

1. **標準化方法**: 
   - 論文要求: Min-Max Normalization 到 [0, 1]
   - 實作: 使用 Min-Max Normalization 到 [0, 100]（更容易視覺化）
   - ✅ **建議**: 保持 0-100，因為前端顯示更直觀

2. **資料處理**:
   - ✅ 使用 Nominatim API 將座標轉換為 ZIP Code
   - ✅ 計算 MoM 和 YoY 成長率
   - ✅ 儲存在 Supabase PostgreSQL–PostGIS

3. **系統架構**:
   - ✅ Angular 前端
   - ✅ GCP Cloud Storage 儲存 JSON
   - ✅ Supabase 資料庫

---

## ⚠️ 需要調整的部分

### 1. Index 計算公式不一致

**論文中的公式 (Equation 2)**:
```
HCI_z = w1 * G_z + w2 * (1 - C_z)
```
其中：
- `G_z` = 標準化的成長指標（結合 MoM 和 YoY）
- `C_z` = 標準化的犯罪測量（每 1000 居民的犯罪率）
- `w1 + w2 = 1`

**當前實作**:
- 我們計算了多個指數（安全指數、可負擔性指數等）
- 但沒有完全按照論文的公式計算 HCI

**建議**:
1. 調整計算方式，使其符合論文公式
2. 或者更新論文，說明我們實作了更豐富的指數系統

### 2. 成長指標 (G_z) 的計算

**論文中的公式 (Equation 3-4)**:
```
G_z = α * YoY_z + (1 - α) * MoM_z
C_z = β * CrimeRate_z + (1 - β) * CrimeTrend_z
```

**當前實作**:
- 我們只使用了當前房價，沒有結合 MoM 和 YoY 來計算成長指標
- 我們只使用了犯罪總數，沒有計算犯罪率（每 1000 居民）

**建議**:
1. 加入人口資料來計算犯罪率
2. 結合 MoM 和 YoY 來計算成長指標
3. 或者簡化論文描述，說明我們使用當前房價和犯罪總數

### 3. 資料範圍說明

**論文提到**:
- 標準化到 [0, 1] 範圍
- 0 代表最不利條件，1 代表最有利條件

**當前實作**:
- 標準化到 [0, 100] 範圍
- 但解釋相同（0 = 最差，100 = 最好）

**建議**:
- 在論文中加入註釋說明使用 0-100 是為了更好的視覺化
- 或者調整實作為 0-1 範圍

---

## 🔧 具體調整建議

### 選項 1: 調整實作以符合論文（推薦）

修改 `scripts/calculate_index.py`，使其完全符合論文公式：

```python
def calculate_hci_paper_formula(
    mom_rate: float,
    yoy_rate: float,
    crime_rate: float,  # 每 1000 居民的犯罪數
    alpha: float = 0.5,  # MoM 和 YoY 的權重
    w1: float = 0.5,     # 成長權重
    w2: float = 0.5      # 安全權重
) -> float:
    """
    按照論文公式計算 HCI
    """
    # 標準化 MoM 和 YoY
    G_z = alpha * normalize(yoy_rate) + (1 - alpha) * normalize(mom_rate)
    
    # 標準化犯罪率
    C_z = normalize(crime_rate)
    
    # 計算 HCI
    HCI_z = w1 * G_z + w2 * (1 - C_z)
    
    return HCI_z
```

### 選項 2: 更新論文以反映實作

在論文中加入說明，我們實作了更豐富的指數系統：
- 安全指數
- 可負擔性指數
- 生活品質指數（結合安全和可負擔性）
- 投資價值指數

---

## 📝 論文內容檢查清單

### 需要確認的部分

1. **技術細節一致性**:
   - [ ] Index 計算公式是否與實作一致
   - [ ] 標準化範圍說明（[0,1] vs [0,100]）
   - [ ] 成長指標計算方式

2. **資料處理**:
   - [ ] 是否說明如何處理缺失值（NaN → null）
   - [ ] 是否說明犯罪率的計算方式
   - [ ] 是否說明 MoM 和 YoY 的結合方式

3. **系統架構**:
   - [ ] 是否正確描述 GCP Cloud Storage 的使用
   - [ ] 是否說明 JSON 檔案結構
   - [ ] 是否說明前端如何讀取資料

4. **倫理考量**:
   - [x] ✅ 已包含倫理考量章節
   - [x] ✅ 已說明避免標籤化
   - [x] ✅ 已說明資料限制

---

## 🎯 建議的行動步驟

### 優先級 1: 修復 JSON NaN 問題
- [x] ✅ 已完成：修復 NaN → null
- [x] ✅ 已完成：重新上傳到 GCP

### 優先級 2: 調整 Index 計算（可選）
- [ ] 決定是否調整實作以符合論文
- [ ] 或更新論文以反映實作

### 優先級 3: 論文細節調整
- [ ] 加入註釋說明 0-100 範圍的原因
- [ ] 確認所有技術細節正確
- [ ] 檢查引用格式

---

## 💡 其他建議

1. **加入實作細節**:
   - 說明 JSON 檔案結構
   - 說明如何處理 NaN 值
   - 說明前端如何讀取和顯示資料

2. **驗證結果**:
   - 加入實際計算結果的範例
   - 說明指數的解釋方式
   - 加入視覺化範例

3. **未來工作**:
   - 說明 HouseTS 整合計劃
   - 說明如何加入人口資料計算犯罪率
   - 說明如何結合 MoM 和 YoY

---

需要我幫您調整實作以完全符合論文公式嗎？

